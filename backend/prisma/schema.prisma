generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
}

model User {
  id       String    @id
  name     String
  avatarUrl String? @db.VarChar(1000)
  listings Listing[] @relation("UserListings")
  bookings Listing[] @relation("UserBookings")
}

model Listing {
  id          String         @id @default(uuid())
  title       String
  description String         @db.Text
  price       Float
  imageUrl    String
  status      ListingStatus  @default(AVAILABLE)

  sellerId String
  seller   User   @relation("UserListings", fields: [sellerId], references: [id])

  buyerId String?
  buyer   User?  @relation("UserBookings", fields: [buyerId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum ListingStatus {
  AVAILABLE
  BOOKED
  SOLD
}
